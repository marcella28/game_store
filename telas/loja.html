<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e1dbe4;
            
        }

        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
            display: flex;
            width:  100%;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom,#c8a4d8, #9d66b4, #605e86 );
            transition: background 0.5s ease; /* Adiciona uma transição de 1 segundo */
        }

        nav {
            display: flex;
            align-items: center;
            margin: 2%;
            justify-content: space-between;
        }

        .logo {
           
            margin-right: 20px;
            font-family: 'Orbitron', sans-serif; /* Fonte para o tema espacial */
    color: #333;
    font-size: 55px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Adiciona um leve sombreamento ao texto do título */

        }

        .menu {
            list-style-type: none;
            display: flex;
            margin-left:50px ;
    font-size: 22px;
    gap: 15px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Adiciona um leve sombreamento ao texto do título */
    justify-content: end;

        }

        .menu li {
            margin-right: 20px;
        }

        .menu a {
            color: #fff;
            text-decoration: none;
        }

        .dropdown {
            position: relative;
        }

        #listasubmenu {
    list-style-type: none; /* Remove as bolinhas/marcadores da lista */
    display: none;
    position: absolute;
    top: 30px;
    background-color: #8e4eaa;
    margin-top: 3%;
    margin-bottom: 3%;
    width: 150px;
    margin: 10px;
}

/* Atualiza o estilo do submenu para torná-lo mais atraente */
.submenu {
    display: none;
    position: absolute;
    top: 30px;
    background-color: #8e4eaa;
    margin-top: 3%;
    margin-bottom: 3%;
    width: 150px;
    margin: 10px;
    border-radius: 5px; /* Adiciona borda arredondada */
}

.dropdown-item {
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.dropdown-item:hover {
    background-color: #694080;
}

/* Remove o estilo de lista dos submenus */
.submenu li {
    list-style-type: none;
}

/* Adiciona um espaçamento entre os itens do submenu */
.submenu li {
    padding: 5px;
}

/* Estiliza os itens do submenu */
.submenu li:hover {
    background-color: #694080;
    cursor: pointer;
}


        .games {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            margin: 20px 0;
           
        }

        .category {
            text-align: start;
            margin-top: 5%;
            
        }


        .rolar {
    overflow-x: scroll; /* Alterado para scroll */
    
    white-space: nowrap; /* Impede que os elementos quebrem para a próxima linha */
    margin: 10px;
}

/* Adicionando um estilo personalizado à barra de rolagem horizontal (opcional) */
.rolar::-webkit-scrollbar {
    height: 12px;
}

.rolar::-webkit-scrollbar-thumb {
    background-color: #888;
}

.rolar::-webkit-scrollbar-track {
    background-color: #f1f1f1;
}


        /* Estilo para a seção de comentários */
.comments {
    margin: 50px;
}

/* Estilo para cada comentário individual */
.comment {
    border: 0.5px solid #594461;
    padding: 10px;
    margin: 10px;
    max-width: 90%;
    max-height: max-content;
    border-radius: 5%;
}

/* Estilo para a área de entrada de novo comentário */
#novo-comentario {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border: 1px solid #594461;
    border-radius: 5px;
}

/* Estilo para o botão de adicionar comentário */
button {
    cursor: pointer;
    padding: 10px;
    background-color: #8a6a9f;
    color: #fff;
    border: none;
    border-radius: 5%;
    margin-top: 10px;
}

button:hover {
    background-color: #b594c4;
}

        #nintendogames, #xboxgames, #playstationgames {
            height: 380px;
            width: 330px;
            margin: 2%;
            text-align: center;
            display: flex;
            flex-direction: row;
            gap: 30%;
            

        }

        .exemplo img {
            height: 170px;
            width: 170px;
            border-radius: 10%;
            border-style: solid;
            border-width: 1px;
            border-color: #333;
            margin-top: 5%;
        }


        
/* Adicionando estilos para as divs dos jogos Nintendo */
.nintendo-games .exemplo {
    background-color: #f2eff3; /* Cor de fundo branca */
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* Sombra suave */
    width: 390px;
    height: 355px;
}

/* Adicionando estilos para as divs dos jogos Xbox */
.xbox-games .exemplo {
    background-color: #f2eff3; /* Cor de fundo branca */
    width: 390px;
    height: 355px;
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* Sombra suave */
}

/* Adicionando estilos para as divs dos jogos Playstation */
.playstation-games .exemplo {
    background-color: #f2eff3; /* Cor de fundo branca */
    width: 390px;
    height: 355px;
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* Sombra suave */
}


h2{
    font-size: 30px;
}

/* Estilizando o input de quantidade */
input[type="number"] {
    width: 50px;
    text-align: center;
    padding: 5px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin-right: 5px;
}

/* Estilizando o botão de adicionar ao carrinho */
button.adicionar-carrinho {
    cursor: pointer;
    border: none;
    border-radius: 5%;
    background-color: #8a6a9f;
 width: 200px;
    height: 40px;
    color: #fff;
    font-size: 14px;
    transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
}

button.adicionar-carrinho:hover {
    background-color: #b594c4;
}

#xboxtitle, #nintendotitle, #playstationtitle {
    font-size: 40px;
    font-family: 'Orbitron', sans-serif; /* Fonte para o tema espacial */

}

  /* Estilo básico para o dropdown */
  .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            min-width: 160px;
            z-index: 1;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        /* Estilo básico para os itens do dropdown */
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo">Gameverse Store </div>
            <ul class="menu">
                <li><a href="loja.html">Home</a></li>
                <li class="dropdown" onclick="mostrarsubmenu('listasubmenu')">
                    
                    <!-- Adicione os itens aos submenus -->
<div style="display: flex; flex-direction: column;">
    <div class="dropdown-content">
        <li class="dropdown" onmouseover="mostrarsubmenu('listasubmenuNintendo')" onmouseout="fecharSubmenu('listasubmenuNintendo')">
            <a href="#" >Nintendo</a>
            <div id="listasubmenuNintendo" class="dropdown-content">
                <a href="Kirby's Dream Buffet.html">Jogo 1 - Nintendo</a>
                <a href="#">Jogo 2 - Nintendo</a>
                <a href="#">Jogo 3 - Nintendo</a>
            </div>
        </li>
        
        <li class="dropdown" onmouseover="mostrarsubmenu('listasubmenuXbox')" onmouseout="fecharSubmenu('listasubmenuXbox')">
            <a href="#">Xbox</a>
            <div id="listasubmenuXbox" class="dropdown-content">
                <a href="#">Jogo 1 - Xbox</a>
                <a href="#">Jogo 2 - Xbox</a>
                <a href="#">Jogo 3 - Xbox</a>
            </div>
        </li>
        
        <li class="dropdown" onmouseover="mostrarsubmenu('listasubmenuPlaystation')" onmouseout="fecharSubmenu('listasubmenuPlaystation')">
            <a href="#">Playstation</a>
            <div id="listasubmenuPlaystation" class="dropdown-content">
                <a href="#">Jogo 1 - Playstation</a>
                <a href="#">Jogo 2 - Playstation</a>
                <a href="#">Jogo 3 - Playstation</a>
            </div>
        </li>
    </div>
</div>






                </li>
                <li><a href="user.html">Usuário</a></li>
                <li><a href="cart.html">Carrinho</a></li>
            </ul>
        </nav>
        
    </header>

  
    <div style="display: flex; justify-content: center; margin-top: 2%;">
        <p>Olá, <span id="nome-usuario-loja"></span>! Vamos comprar alguns jogos?</p>
    </div>
    <section class="games">
        <div class="category nintendo-games">
            <div style="display: flex; flex-direction: row; gap: 20px; justify-content: center; align-items: center;"><a href='https://postimg.cc/PCTXbcY4' target='_blank'><img src='https://i.postimg.cc/PCTXbcY4/nintendo-console.png' border='0' alt='nintendo-console'/></a><h2 id="nintendotitle">Nintendo</h2></div>
            
            <div class="rolar">
            <div id="nintendogames"></div>
        </div>
        </div>

        <div class="category xbox-games">
            <div style="display: flex; flex-direction: row; gap: 20px; justify-content: center; align-items: center;">
                <a href='https://postimg.cc/PLfqHcqx' target='_blank'><img src='https://i.postimg.cc/PLfqHcqx/ccc5d20152b80b262bf0c56f2c9a8d09-removebg-preview.png' border='0' alt='ccc5d20152b80b262bf0c56f2c9a8d09-removebg-preview'/></a><h2 id="xboxtitle">Xbox</h2>
            
        </div>
            <div class="rolar">
            <div id="xboxgames"></div>
        </div>
        </div>

        <div class="category playstation-games">
            <div style="display: flex; flex-direction: row; gap: 20px; justify-content: center; align-items: center;">
            <a href='https://postimg.cc/D4Gv53xC' target='_blank'><img src='https://i.postimg.cc/D4Gv53xC/playstationconsole.png' border='0' alt='playstationconsole'/></a><h2 id="playstationtitle">Playstation</h2>
        </div>
            <div class="rolar">
            <div id="playstationgames"></div>
            </div>
        </div>
    </section>

    <section class="comments">
        <h2>Comentários Gerais</h2>
        <div class="comment-section">
            <div id="comentarios-lista"></div>
            <textarea id="novo-comentario" placeholder="Digite seu comentário"></textarea>
            <button onclick="adicionarComentario()">Adicionar Comentário</button>
        </div>

        
            <div id="comentarios-gerais-container">
                <!-- Aqui aparecerão os comentários gerais -->
            </div>
       
    </section>

    <script>
  // Adicione esta função para fechar o submenu quando clicar em um item
function fecharSubmenu(submenu) {
    var submenuElement = document.getElementById(submenu);
    submenuElement.style.display = 'none';
}

// Adicione estas funções para mostrar e fechar submenus ao passar o mouse
function mostrarsubmenu(submenu) {
    var submenuElement = document.getElementById(submenu);
    submenuElement.style.display = 'block';
}

        // Adicione a função mudarBackground ao seu script
function mudarBackground(elemento) {
    elemento.style.backgroundColor = '#694080'; // Cor desejada ao passar o mouse
}

// Adicione também a função para restaurar o background quando o mouse sair do item
function restaurarBackground(elemento) {
    elemento.style.backgroundColor = '';
}





    
        document.addEventListener('DOMContentLoaded', () => {
    // ...

    // Adicione esta parte para obter informações do usuário na página loja.html
    fetch('/obter-informacoes-usuario')
        .then(response => response.json())
        .then(data => {
            const nomeUsuarioElement = document.getElementById('nome-usuario-loja');
            if (nomeUsuarioElement) {
                nomeUsuarioElement.textContent = data.nome || 'Convidado';
            }
        })
        .catch(error => console.error('Erro ao obter informações do usuário:', error));

    // Adicione esta parte para obter informações do usuário na página user.html
    fetch('/obter-informacoes-usuario')
        .then(response => response.json())
        .then(data => {
            const nomeUsuarioElement = document.getElementById('nome-usuario-user');
            if (nomeUsuarioElement) {
                nomeUsuarioElement.textContent = data.nome || 'Convidado';
            }
        })
        .catch(error => console.error('Erro ao obter informações do usuário:', error));
});

function mostrarJogos(categorias) {
    const categoriasDivs = {
        Nintendo: document.getElementById('nintendogames'),
        Xbox: document.getElementById('xboxgames'),
        Playstation: document.getElementById('playstationgames')
    };

    Object.keys(categorias).forEach(categoria => {
        const categoriaDiv = categoriasDivs[categoria];
        const jogos = categorias[categoria];

        jogos.forEach(jogo => {
    console.log('ID do jogo:', jogo.idproduto);
            const jogoDiv = document.createElement('div');
            jogoDiv.classList.add('exemplo');
            jogoDiv.innerHTML = `
            <p style="font-size:20px;">${jogo.nomeprod}</p>
    <a href='${jogo.imagem}' target='_blank'>
        <img src='${jogo.imagem}' alt='${jogo.nomeprod}'/>
    </a>
    <p>${jogo.preco}</p>
    <div style="display:flex; flex-direction:row; gap:5%;">
        <!-- Adicione este campo de entrada -->
        <input type="number" id="quantidade-${jogo.idproduto}" class="quantidade-input" value="1" min="1" />
<button class="adicionar-carrinho" onclick="adicionarAoCarrinho(${jogo.idproduto}, ${jogo.preco}, document.getElementById('quantidade-${jogo.idproduto}').value)">Adicionar ao Carrinho</button>
    </div>

            `;
            categoriaDiv.appendChild(jogoDiv);
        });
    });
}
    
        document.addEventListener('DOMContentLoaded', () => {
    // Simulando a resposta do servidor (substitua isso pela lógica de requisição AJAX real)
    const dadosDoServidor = {
        Nintendo: [
            {idproduto: 1, nomeprod: 'Kirby’s Dream Buffet', imagem: 'https://i.postimg.cc/Yv04V4cH/Kirby-s-Dream-Buffet.jpg', preco: '49.99', categoria_id: 1 },
            {idproduto: 2, nomeprod: 'Terraria', imagem: 'https://i.postimg.cc/0zkMsqnd/Terraria.jpg', preco: '29.99', categoria_id: 1 },
            {idproduto: 3, nomeprod: 'Mortal Kombat 1', imagem: 'https://i.postimg.cc/kDWBR5hv/Mortal-Kombat-1.jpg', preco: '19.99', categoria_id: 1 },
            {idproduto: 4, nomeprod: 'Mario Wonder', imagem: 'https://i.postimg.cc/Z0LdncRL/Mario-Wonder.jpg', preco: '39.99', categoria_id: 1 },
            {idproduto: 5, nomeprod: 'Apex Legends', imagem: 'https://i.postimg.cc/2qzpkrXG/Apex-Legends.jpg', preco: '29.90', categoria_id: 1 },
            {idproduto: 6, nomeprod: 'Fall Guys', imagem: 'https://i.postimg.cc/bGYMXLsF/Fall-Guys.jpg', preco: '14.99', categoria_id: 1 },
            {idproduto: 7, nomeprod: 'Rocket League', imagem: 'https://i.postimg.cc/Thbt4Bt3/Rocket-League.jpg', preco: '24.99', categoria_id: 1 },
        ],
        Xbox: [
            {idproduto: 8, nomeprod: 'Minecraft', imagem: 'https://i.postimg.cc/68HspDJN/Minecraft.jpg', preco: '29.99', categoria_id: 1 },
            {idproduto: 9, nomeprod: 'Assassins Creed', imagem: 'https://i.postimg.cc/pytP4MP0/Assassins-Creed.jpg', preco: '49.99', categoria_id: 1 },
            {idproduto: 10, nomeprod: 'Forza Horizon 5', imagem: 'https://i.postimg.cc/B8KG7Mk9/Forza-Horizon.jpg', preco: '59.99', categoria_id: 1 },
            {idproduto: 11, nomeprod: 'Overwatch 2', imagem: 'https://i.postimg.cc/kBY4kY1B/Overwatch.jpg', preco: '49.99', categoria_id: 1 },
            {idproduto: 12, nomeprod: 'Lego Fortnite', imagem: 'https://i.postimg.cc/1fVh3WRg/Lego-Fortnite.jpg', preco: '39.99', categoria_id: 1 },
            {idproduto: 13, nomeprod: 'Fifa 22', imagem: 'https://i.postimg.cc/KK0xMR64/Fifa-22.jpg', preco: '59.99', categoria_id: 1 },
            {idproduto: 14, nomeprod: 'Star Wars Jedi: Fallen Order', imagem: 'https://i.postimg.cc/14tc62qz/Star-Wars-Jedi-Fallen-Order.jpg', preco: '44.99', categoria_id: 1 },
        ],
        Playstation: [
            {idproduto: 15, nomeprod: 'The Last of Us Part II', imagem: 'https://i.postimg.cc/Cds5hx1B/The-Last-of-Us-Part-I.jpg', preco: '54.99', categoria_id: 1 },
            {idproduto: 16, nomeprod: 'Ghost of Tsushima', imagem: 'https://i.postimg.cc/NKMk8nVD/Ghost-of-Tsushima.jpg', preco: '49.99', categoria_id: 1 },
            {idproduto: 17, nomeprod: 'God of War', imagem: 'https://i.postimg.cc/Vd3XMNqf/God-of-War.jpg', preco: '39.99', categoria_id: 1 },
            {idproduto: 18, nomeprod: 'Spider-Man: Miles Morales', imagem: 'https://i.postimg.cc/6TqHfyvn/Spider-Man-Miles-Morales.jpg', preco: '49.99', categoria_id: 1 },
            {idproduto: 19, nomeprod: 'Resident Evil Village', imagem: 'https://i.postimg.cc/d7dk8M2z/Resident-Evil-Village.jpg', preco: '44.99', categoria_id: 1 },
            {idproduto: 20, nomeprod: 'Deathloop', imagem: 'https://i.postimg.cc/QFfSRTvX/Deathloop.jpg', preco: '54.99', categoria_id: 1 },
            {idproduto: 21, nomeprod: 'Gran Turismo 7', imagem: 'https://i.postimg.cc/mtJ6DM88/Gran-Turismo-7.jpg', preco: '59.99', categoria_id: 1 },
        ]
    };

    // Chamando a função para exibir os jogos
    mostrarJogos(dadosDoServidor);

    
});

fetch('/obter-comentarios')
    .then(response => response.json())
    .then(comentarios => {
        const comentariosLista = document.getElementById('comentarios-lista');

        comentarios.forEach(comentario => {
            const comentarioDiv = document.createElement('div');
            comentarioDiv.classList.add('comment');
            comentarioDiv.innerHTML = `
                <p><strong>${comentario.usuario}</strong>: ${comentario.texto}</p>
            `;
            comentariosLista.appendChild(comentarioDiv);
        });
    })
    .catch(error => console.error('Erro ao obter comentários:', error));
function adicionarComentario() {
    const novoComentarioInput = document.getElementById('novo-comentario');
    const novoComentarioTexto = novoComentarioInput.value;

    if (novoComentarioTexto.trim() !== '') {
        // Aqui você pode usar o fetch para enviar o novo comentário para o servidor
        fetch('/adicionar-comentario', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ texto: novoComentarioTexto }),
        })
        .then(response => response.json())
        .then(data => {
            // Adicione aqui a lógica para dar feedback ao usuário
            alert(data.mensagem);  // Exemplo: exibe um alerta com a mensagem do servidor

            // Atualize a lista de comentários na página
            obterComentarios();
        })
        .catch(error => {
            console.error('Erro ao adicionar comentário:', error);
            // Adicione aqui a lógica para dar feedback ao usuário em caso de erro
        });
    } else {
        alert('Digite um comentário válido.');
    }
}

function adicionarAoCarrinho(idProduto, preco, quantidade) {
    fetch('/adicionar-ao-carrinho', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ productId: idProduto, preco: preco, quantidade: quantidade }),
    })
    .then(response => response.json())
    .then(data => {
        console.log('Resposta do servidor:', data);

        // Adicione aqui a lógica para dar feedback ao usuário
        alert(data.mensagem);  // Exemplo: exibe um alerta com a mensagem do servidor

        // Atualize os itens do carrinho na página
        obterItensCarrinho();
    })
    .catch(error => {
        console.error('Erro ao adicionar ao carrinho:', error);
        // Adicione aqui a lógica para dar feedback ao usuário em caso de erro
    });
}

function obterComentariosGerais() {
    fetch('/obter-todos-comentarios')
        .then(response => response.json())
        .then(comentarios => {
            const comentariosContainer = document.getElementById('comentarios-gerais-container');

            // Limpe o conteúdo atual dos comentários gerais
            comentariosContainer.innerHTML = '';

            // Adicione os comentários gerais ao HTML
            comentarios.forEach(comentario => {
                // Converta a string da data para um objeto Date
                const dataPublicacao = new Date(comentario.dataPublicacao);

                const comentarioDiv = document.createElement('div');
                comentarioDiv.innerHTML = `
                    <p><strong>${comentario.usuario}</strong> em ${dataPublicacao.toLocaleString()}:</p>
                    <p>${comentario.texto}</p>
                    <hr>
                `;
                comentariosContainer.appendChild(comentarioDiv);
            });
        })
        .catch(error => console.error('Erro ao obter comentários gerais:', error));
}

// Chame a função para obter os comentários gerais durante a inicialização
document.addEventListener('DOMContentLoaded', () => {
    obterComentariosGerais();
});


</script>

</body>
</html>